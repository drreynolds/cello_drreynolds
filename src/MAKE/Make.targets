#=======================================================================
#
# Targets
#
#    all
#    test
#    dep
#    clean
#    install
#
#=======================================================================

.PHONY: all
all: dep $(OBJS)  $(TESTS) $(EXES)

#-----------------------------------------------------------------------

.PHONY: test
test: $(TESTS) run-tests
	@echo "Making $(PACKAGE) tests"

.PHONY: run-tests
run-tests: $(patsubst %,run-test-%,$(TESTS))

run-test-%: %
	    -./$*

#-----------------------------------------------------------------------
.PHONY: dep
dep:
	-@(makedepend -fDEPEND $(INC) -- -- *.cpp *.F *.def)


#-----------------------------------------------------------------------

.PHONY: clean
clean: clean-local
	@echo "Cleaning src/$(PACKAGE)"
	-@(rm -f *~ *.o DEPEND.bak)
	-@(rm -f $(TESTS) $(EXES) *.unit)
# lex.yy.c 
# *.hdf5 
# *.eps
# lib*.a
# Makefile.bak
# *.out
# out.make.dep
# parse.c parse.tab.? *.png 


#-----------------------------------------------------------------------

.PHONY: install
install: install-include $(OBJS)
	ar rcu $(TOP)/lib/libcello.a      $(OBJS)   
	ar rcu $(TOP)/lib/lib$(PACKAGE).a $(OBJS)
	cp $(TESTS) $(TOP)/bin
	cp $(EXES)  $(TOP)/bin

#-----------------------------------------------------------------------


%0       1         2         3         4         5         6         7         8
%2345678901234567890123456789012345678901234567890123456789012345678901234567890

\documentclass[11pt]{article}

\include{include}

\begin{document}

%==================================================================
\TITLE{\amrSolve \\ Software Requirements Specifications}{James Bordner}{0.1.0}
%==================================================================
% \tableofcontents
% %========================================================================
% \section{Modification History}
% %========================================================================
% 
% \BeginDESCRIPTION
% \item[0.94 (2004-04-01):] Added definition of neighbors
% \item[0.93 (2004-03-18):] Added Fields; revised content
% \item[0.92 (2004-03-17):] Added factor of four to grid resolution
% \item[0.91 (2004-03-16):] Revised content
% \item[0.91 (2004-03-16):] Added Modification History section
% \EndDESCRIPTION

%==================================================================
\section{Introduction}
%==================================================================

\amrSolve\ will be a linear solver package for patch-based AMR applications.
The main classes comprising \amrSolve\ are the following:
%
\class{Grid}s (\S\ref{ss:grid}), 
\class{Level}s (\S\ref{ss:level}), 
\class{Hierarchy}s (\S\ref{ss:hierarchy}), 
\class{Iterator}s (\S\ref{ss:iterator}), 
\class{Vector}s (\S\ref{ss:vector}), 
\class{Matrix}es (\S\ref{ss:matrix}),
\class{Stencil}s (\S\ref{ss:stencil}),
\class{Discret}s (\S\ref{ss:discret}),
\class{Solver}s (\S\ref{ss:solver}).

%------------------------------------------------------------------------
\FIGURE{\amrSolve\ Package}{f:uml-amrSolve}{
\begin{center}
\epsfig{file=uml-amrSolve.\GRAPHICSSUFFIX,width=1.5in}
\end{center}}
%------------------------------------------------------------------------

%==================================================================
\section{Classes}
%==================================================================


%-----------------------------------------------------------------------
\subsection{\class{Grid} class} \label{ss:grid}
%-----------------------------------------------------------------------

\class{Grid}s implicitly represent a set of vertices arranged in
a grid pattern in a $3$D box in space.

%-----------------------------------------------------------------------
\subsubsection{\class{Grid} class specifications} \label{sss:grid-specifications}

\BeginENUMERATE
\item \class{Grid}s are $3$D, but can be interpreted as $1$D or $2$D if some axis lengths are one.
\item A \class{Grid} has a position in physical space, determined by any two opposing corners.
\item A \class{Grid} has a size in computational space, determined by the number of vertices along each axis.
\item Spacing between vertices along each axis is uniform.
\item \class{Grid}s do not contain data (see \S\ref{ss:vector} on \class{Vector}s).
\item Each \class{Grid} is  classified as either a \textit{local} \class{Grid} or a \textit{remote} \class{Grid}.
\item Each \class{Grid} is local on exactly one processor.
\item All non-root level \class{Grid}s have a unique \textit{parent} \class{Grid} in
    the next-coarser \class{Level}.
\item A \class{Grid} has a set of adjacent \textit{neighbor} \class{Grid}s.
  \class{Grid}s are adjacent iff the ghost zone of one \class{Grid} is a real
    zone in the other \class{Grid}. (This is a symmetric relationship).
\item A \class{Grid} has a set of \textit{child} \class{Grid}s in
the next-finer \class{Level}.
\item Corner vertices of a \class{Grid} must coincide with
vertices of its parent \class{Grid}.
\EndENUMERATE

%-----------------------------------------------------------------------
\subsubsection{\class{Grid} class examples} \label{sss:grid-usecases}

\CodeSnippetTabbing{
\> \comment{Create a new grid.} \\
\\
\> \code{Grid grid (Point(0,0,0),Point(1,1,1), 32,32,32);} \\
\\
\> \comment{Attach to an existing application grid.} \\
\\
\> \code{Grid grid (enzo::grid);} \\
\\
\> \comment{Save a grid to the file ``100.grid''.} \\
\\
\> \code{grid.store ("100");} \\
\\
\> \comment{Load a grid from the file ``200.grid''.} \\
\\
\> \code{grid.load ("200");}
}


%-----------------------------------------------------------------------
\subsection{\class{Level} class} \label{ss:level}
%-----------------------------------------------------------------------

\class{Level}s encapsulate all grids within a single level of a 
\class{Hierarchy}.

%-----------------------------------------------------------------------
\subsubsection{\class{Level} class specifications} \label{sss:level-specifications}


\BeginENUMERATE
\item A \class{Level} is an unordered list of \class{Grid}s
\item \class{Grid}s within a \class{Level} must be disjoint.
\item \class{Grid}s within a \class{Level} have the same spacing between vertices
\EndENUMERATE

%-----------------------------------------------------------------------
\subsubsection{\class{Level} class examples} \label{sss:level-usecases}

\CodeSnippetTabbing{
\> \comment{Create a new level.} \\
\\
\> \code{Level level;} \\
\> \code{level.insert (grid);} \\
\\
\> \comment{Attach to an existing application level.} \\
\\
\> \code{Level level (enzo::level);} \\
\\
\> \comment{Save a level to the file ``100.level''.} \\
\\
\> \code{level.store ("100");} \\
\\
\> \comment{Load a level from the file ``200.level''.} \\
\\
\> \code{level.load ("200");}
}

%-----------------------------------------------------------------------
\subsection{\class{Hierarchy} class} \label{ss:hierarchy}
%-----------------------------------------------------------------------

A \class{Hierarchy} represents an entire AMR hierarchy.

%-----------------------------------------------------------------------
\subsubsection{\class{Hierarchy} class specifications} \label{sss:hierarchy-specifications}


\BeginENUMERATE
\item A \class{Hierarchy} is an ordered list of \class{Level}s
\item \class{Grid}s have at most one parent
\item Resolution changes by a factor of two or four between \class{Grid} \class{Level}s
\item Corner vertices of a non-root \class{Grid} are aligned with vertices in the \class{Grid}'s parent
\item \class{Grid}s in non-successive \class{Level}s cannot be adjacent
\item The union of \class{Grid}s in the root \class{Level} form a box
\EndENUMERATE

%-----------------------------------------------------------------------
\subsubsection{\class{Hierarchy} class examples} \label{sss:hierarchy-usecases}

\CodeSnippetTabbing{
\> \comment{Create a new hierarchy.} \\
\\
\> \code{Hierarchy hierarchy;} \\
\> \code{hierarchy.insert (level,0);} \\
\\
\> \comment{Attach to an existing application hierarchy.} \\
\\
\> \code{Hierarchy hierarchy (enzo::hierarchy);} \\
\\
\> \comment{Save a hierarchy to the file ``100.hierarchy''.} \\
\\
\> \code{hierarchy.store ("100");} \\
\\
\> \comment{Load a hierarchy from the file ``200.hierarchy''.} \\
\\
\> \code{hierarchy.load ("200");}
}

%-----------------------------------------------------------------------
\subsection{\class{Iterator} class} \label{ss:iterator}
%-----------------------------------------------------------------------

%-----------------------------------------------------------------------
\subsubsection{\class{Iterator} class specifications} \label{sss:iterator-specifications}

%-----------------------------------------------------------------------
\subsubsection{\class{Iterator} class examples} \label{sss:iterator-usecases}

\CodeSnippetTabbing{
\> \comment{Iterate over Levels in a Hierarchy.} \\
\\
\> \code{ItLevels itLevels;} \\
\> \code{while (Level *plevel = itLevels.next()) \{} \\
\> \> \vdots \\
\> \}
}
%-----------------------------------------------------------------------
\subsection{\class{Vector} class} \label{ss:vector}
%-----------------------------------------------------------------------

%-----------------------------------------------------------------------
\subsubsection{\class{Vector} class specifications} \label{sss:vector-specifications}


\BeginENUMERATE
\item \class{Vector}s map \class{Grid}s to arrays or to \texttt{NULL}
\item An array for a \class{Grid} exists on exactly one processor, depending
  on if the \class{Grid} is \textit{local} or \textit{remote}.
\item An array may have a \textit{ghost} layer with a depth of at most $1$.
\item \class{Vector}s can be defined on a single \class{Grid} (\textit{grid}-\class{Vector}), \class{Level} (\textit{level}-\class{Vector}), or on an entire \class{Hierarchy} (\textit{hierarchy}-\class{Vector}).
\item A \class{Vector}'s elements are associated with zone centers.
\item A \class{Vector} may have redundant elements covered by finer-level \class{Grid}s.
\EndENUMERATE

%-----------------------------------------------------------------------
\subsubsection{\class{Vector} class examples} \label{sss:vector-usecases}

%-----------------------------------------------------------------------
\subsection{\class{Matrix} class}  \label{ss:matrix}
%-----------------------------------------------------------------------

A \class{Matrix} represents a linear operator defined on \class{Vector}s in an AMR \class{Hierarchy}.

%-----------------------------------------------------------------------
\subsubsection{\class{Matrix} class specifications} \label{sss:matrix-specifications}


\BeginENUMERATE
\item A \class{Matrix} can be applied to a \class{Vector} ($y \leftarrow A x$)
\item $x$ and $y$ can be both \class{Hierarchy} \class{Vector}s
\item $x$ and $y$ can be level-\class{Vector}s at most one level apart
\item \class{Matrix}es must support $7$-point and $19$-point stencil operators
\item \class{Matrix}es must support specialized discretizations along \class{Grid} faces, edges, and corners
\EndENUMERATE

%-----------------------------------------------------------------------
\subsubsection{\class{Matrix} class examples} \label{sss:matrix-usecases}

%-----------------------------------------------------------------------
\subsection{\class{Stencil} class} \label{ss:stencil}
%-----------------------------------------------------------------------

%-----------------------------------------------------------------------
\subsubsection{\class{Stencil} class specifications} \label{sss:stencil-specifications}

%-----------------------------------------------------------------------
\subsubsection{\class{Stencil} class examples} \label{sss:stencil-usecases}

%-----------------------------------------------------------------------
\subsection{\class{Discret} class} \label{ss:discret}
%-----------------------------------------------------------------------

%-----------------------------------------------------------------------
\subsubsection{\class{Discret} class specifications} \label{sss:discret-specifications}

%-----------------------------------------------------------------------
\subsubsection{\class{Discret} class examples} \label{sss:discret-usecases}

%-----------------------------------------------------------------------
\subsection{\class{Solver} class} \label{ss:solver}
%-----------------------------------------------------------------------

\class{Solver}s represents linear solvers.

%-----------------------------------------------------------------------
\subsubsection{\class{Solver} class specifications} \label{sss:solver-specifications}

\BeginENUMERATE
\item  A  \class{Solver} must exist that is suitable for solving the Poisson equation
\item  A  \class{Solver} must exist that is suitable for solving linear equations arising from the FLD method for radiation transport
\item  A  \class{Solver} must exist that is suitable for solving linear equations arising from the FTEF method for radiation transport
\item  A  \class{Solver} must exist that is suitable for solving linear equations arising from the ``Paschos'' method for radiation transport
\item Must support periodic, dirichlet, and Neumann boundary conditions
\EndENUMERATE


%-----------------------------------------------------------------------
\subsubsection{\class{Solver} class examples} \label{sss:solver-usecases}

%==================================================================
\end{document}
%==================================================================


